{% extends "about.html" %}
{% block title %}Search Results{% endblock %} 
{% block head %}
<head>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <!-- Bootstrap Core CSS -->
    <link href="{{ url_for('static', filename='stylesheets/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='stylesheets/about.css') }}" rel="stylesheet">
   
    <!-- Table CSS -->
    <link href="https://cdn.datatables.net/1.10.10/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <!-- Table JS -->
    <script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
    <!-- Table JS - Bootstrap specific -->
    <script src="https://cdn.datatables.net/1.10.10/js/dataTables.bootstrap.min.js"></script>

    <!-- Custom Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Raleway:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="{{ url_for('static', filename='js/sortable.js') }}"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


    <!-- jQuery -->
    <!-- // <script src="{{ url_for('static', filename='js/jquery.js') }}"></script> -->
    
    <!-- Bootstrap Core JavaScript -->
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>


    <!-- Menu Toggle Script -->

    <script>

          $("#menu-toggle").click(function(e) {
                e.preventDefault();
                $("#wrapper").toggleClass("toggled");
           });

         {% for i in range(0, len(ordering)) %}
         $(document).ready(function() {
            $('#dataTable{{ordering[i].title() }}').DataTable();
          });
         {% endfor %}
    </script>



</head>
{% endblock %}

{% block content %}
    

<div class="container">
  <h2>Search Results</h2>
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#{{ ordering[0] }}">{{ ordering[0] }}</a></li>
    {% for i in range(1, len(ordering)) %}
    <li><a data-toggle="tab" href="#{{ ordering[i] }}">{{ ordering[i] }}</a></li>
    {% endfor %}
  </ul>

  <div class="tab-content">
  {% set model = ordering[0] %}
    <div id="{{ordering[0]}}" class="tab-pane fade in active">
          <!-- Description -->
            <h1 class="description">
              American Vehicle {{ model.title() }}
            </h1>
            
            <!-- Table demo -->
            <div class="box-table">
                <table id="#dataTable{{ ordering[0].title() }}" class="table table-striped table-bordered" width="100%">
                    <thead>
                    <tr>
                        {% for h in query_dict[model][HEADER_IDX] %}
                        <th>{{ h }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                    <tbody>
                    {% for v in items[model] %}
                    <tr>
                    {% for k, f in z(query_dict[model][KEY_IDX], query_dict[model][FUNCTION_IDX]) %}
                    {% set query_item = query_dict[model][DB_IDX].query.filter_by(id=v).first() %}
                    {% set header_val, key_val = f(k, query_item) %}
                        <td>{{ key_val|safe }}</td>
                    {% endfor %}
                    </tr>
                    {% endfor %}
                    </tbody>
                </table> 
               
            </div>
        </div>
    {% for i in range(1, len(ordering)) %}
        {% set model = ordering[i] %}
        <div id="{{model}}" class="tab-pane fade">
         <!-- Description -->
            <h1 class="description">
              American Vehicle {{ model.title() }}
            </h1>
            <!-- Table demo -->
            <div class="box-table">
                <table id="#dataTable{{ ordering[i].title() }}" class="table table-striped table-bordered" width="100%">
                    <thead>
                    <tr>
                        {% for h in query_dict[model][HEADER_IDX] %}
                        <th>{{ h }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                    <tbody>
                    {% for v in items[model] %}
                    <tr>
                    {% for k, f in z(query_dict[model][KEY_IDX], query_dict[model][FUNCTION_IDX]) %}
                    {% set query_item = query_dict[model][DB_IDX].query.filter_by(id=v).first() %}
                    {% set header_val, key_val = f(k, query_item) %}
                        <td>{{ key_val|safe }}</td>
                    {% endfor %}
                    </tr>
                    {% endfor %}
                    </tbody>
                </table> 
            </div>
        </div>
    {% endfor %}
  </div>
</div>










    <!-- Header -->
    <div class="intro-header">
        <div class="container">
        {% for model in ordering %}
            <div class="row">
                <div class="col-lg-12">
                    <div class="intro-message">
                    
                        

                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    </div>
</div>

{% endblock %}